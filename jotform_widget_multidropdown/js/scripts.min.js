Object.keys ||
    (Object.keys = function (e) {
        if (e !== Object(e)) throw new TypeError("Object.keys called on a non-object");
        var t,
            r = [];
        for (t in e) Object.prototype.hasOwnProperty.call(e, t) && r.push(t);
        return r;
    });
("use strict");
window.addEventListener("load", function () {
    function r(s, n) {
        var e = JFCustomWidget.getWidgetSettings(),
            o = e.separator && "<empty>" != e.separator ? " " + e.separator + " " : "\n",
            c = [];
        function t() {
            var r = [];
            return (
                $("#" + s + " select").each(function (e, t) {
                    if ((r.push($(t).val()), (JFCustomWidget.isWidgetRequired() || $(t).attr("required")) && !$(t).val())) return !(r = []);
                }),
                { valid: !!(r = r.join(o)), value: r }
            );
        }
        function r(e) {
            var t,
                r = 0;
            for (t in (e = e.split(o))) {
                var n = a(e[t]),
                    i = $("#" + s + " select")[r];
                $(i).val(n).trigger("change.select2"), (r += 1);
            }
            m();
        }
        function i(e) {
            var t = [],
                r = !1;
            if (e) {
                var n,
                    i = e.split(/\r\n|\r|\n/g);
                for (n in i) {
                    var o = i[n],
                        a = d(o),
                        s = -1;
                    o = (o = o.trim())
                        .replace(/&amp;amp;/g, "&")
                        .replace(/&amp;#39;/g, "'")
                        .replace(/&amp;lt;/g, "<")
                        .replace(/&amp;gt;/g, ">")
                        .replace(/&amp;quot;/g, '"')
                        .replace(/&amp;/g, "&")
                        .replace(/&#39;/g, "'")
                        .replace(/&lt;/g, "<")
                        .replace(/&gt;/g, ">")
                        .replace(/&quot;/g, '"');
                    for (var l = 0; l < t.length && !(a <= t[l].depth); l++) s = l;
                    for (; s + 1 < t.length; ) t.pop();
                    t.push({ index: n, depth: a });
                    var u = o.match(/^ *\*/);
                    !r && u && (r = !0), c.push({ value: p(o), parent: 0 <= s ? Number(t[s].index) : null, required: u });
                }
            }
            return r && v(), g(c, null);
        }
        function d(e) {
            for (var t = 0; " " === e[t]; ) t++;
            return t;
        }
        function p(e) {
            return (e = "." === (e = e.replace(/\r/, "").replace(/^ +/, "").replace(/ +$/, "").replace(/^\*/, "")) ? "" : e);
        }
        function a(e) {
            return (e = "." === (e = e.replace(/\r/, "").replace(/^ +/, "").replace(/ +$/, "").replace(/^\*$/, "")) ? "" : e);
        }
        function g(e, t) {
            for (var r = { values: {}, required: !1 }, n = 0; n < e.length; n++) {
                var i = e[n];
                i.parent === t && ((r.values[i.value] = g(e, n)), null !== i.parent) && e[i.parent].required && (r.required = !0);
            }
            return r;
        }
        function l(e) {
            return isNaN(e) || "" == e || (e += ""), e;
        }
        function v() {
            JFCustomWidget.isWidgetRequired() || JFCustomWidget.makeWidgetRequired();
        }
        function u(r, n) {
            if (((n = n || 0), $("#" + s + " select.dd-" + n).select2("destroy"), $("#" + s + " select.dd-" + n).remove(), r && Object.keys(r.values).length)) {
                var e = $("<select>", { class: f(n), required: r.required }),
                    t = Object.keys(r.values),
                    i = [];
                for (a in t) {
                    var o = t[a];
                    "" === o ? i.push(o) : $("<option>", { value: o }).html(o).appendTo(e);
                }
                if (0 < i.length) for (var a in i) $("<option>", { value: "" }).html(i[a]).prependTo(e), e.val($(e.attr("class") + " option:first").val());
                e.appendTo("#" + s),
                    e
                        .select2({ placeholder: "Please select", dropdownPosition: "below" })
                        .on("select2:close", function () {
                            m();
                        })
                        .on("select2:open", function (e) {
                            setTimeout(m, 150);
                        })
                        .on("select2:select", function (e) {
                            $(this).val() && (u(r.values[l(this.value)], n + 1), h());
                        })
                        .on("change.select2", function (e) {
                            var t = $(this).val(),
                                t =
                                    (t && (u(r.values[l(this.value)], n + 1), h()),
                                    c
                                        .map(function (e) {
                                            return e.value;
                                        })
                                        .indexOf(t));
                            -1 !== t && null !== c[t].required && JFCustomWidget.makeWidgetRequired();
                        }),
                    u(r.values[l(e.val())], n + 1),
                    W();
            } else m();
        }
        function f(e) {
            for (var t = "", r = 0; r <= e; r++) t += "dd-" + r + " ";
            return t;
        }
        function h() {
            JFCustomWidget.sendData(t());
        }
        function m(e = !1) {
            e
                ? q(".select2-dropdown", function () {
                      b();
                  })
                : b();
        }
        function b() {
            if (JFCustomWidget) {
                var e,
                    t = $("body").height(),
                    r = t;
                if (
                    ((parseInt($(".select2-dropdown").parent().css("top")) || 0) < 0
                        ? ($(".select2-dropdown").parent().css("top", 0), (r = t + (e = $(".select2-dropdown").height() || 0) + 20))
                        : ((e = $(".select2-dropdown").height() || 0), t <= (t = parseInt($(".select2-dropdown").parent().css("top")) || 0) + e && (r = t + e + 20)),
                    "cardform" in n && n.cardform)
                )
                    return JFCustomWidget.requestFrameResize({ width: "99.9%", height: r });
                JFCustomWidget.requestFrameResize({ width: $("body").width(), height: r });
            }
        }
        function W() {
            $("#" + s + " select").each(function (e, t) {
                "" == $(t).val() && 1 == $(t).find("option").length && "" == $(t).find("option").text() && ($(t).hide(), m());
            });
        }
        function q(t, r) {
            const n = new MutationObserver((e) => {
                document.querySelector(t) && (n.disconnect(), r(document.querySelector(t)));
            });
            n.observe(document.body, { childList: !0, subtree: !0 });
        }
        (this.init = function () {
            u(i(e.list)), n && n.value ? r(n.value) : $("#" + s + " select option:selected").val() && h();
            $("#" + s + " select option:selected").val() || JFCustomWidget.isWidgetRequired() || JFCustomWidget.makeWidgetNotRequired();
            m();
        }),
            (this.getData = t),
            (this.clearValues = function () {
                var e = 0,
                    t = $("#" + s + " select").length;
                for (; e <= t; ) {
                    var r = $("#" + s + " select")[e];
                    $(r).val("").trigger("change.select2"), (e += 1);
                }
                m();
            });
    }
    JFCustomWidget.subscribe("ready", function (e) {
        var t = new r("dropdownsContainer", e);
        t.init(),
            JFCustomWidget.subscribe("clear", t.clearValues),
            JFCustomWidget.subscribe("submit", function () {
                JFCustomWidget.sendSubmit(t.getData());
            });
    });
});
//# sourceMappingURL=scripts.min.js.map
